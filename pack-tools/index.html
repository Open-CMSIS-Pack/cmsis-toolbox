<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Pack Creation - CMSIS-Toolbox</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Pack Creation";
        var mkdocs_page_input_path = "pack-tools.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CMSIS-Toolbox
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../build-tools/">Build Tools</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../build-overview/">CSolution Project Structure</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../YML-Input-Format/">CSolution Project Format</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CreateApplications/">Create Applications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ReferenceApplications/">Reference Applications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CubeMX/">Configure STM32 Devices with STM32CubeMX</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../MCUXpressoConfig/">Configure NXP Devices with MCUXpresso Config Tools</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../YML-CBuild-Format/">Build Information Files</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../build-operation/">Build Operation</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Pack Creation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#device-family-pack-dfp-content">Device Family Pack (DFP) Content</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#board-support-pack-bsp-content">Board Support Pack (BSP) Content</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generic-software-pack-gsp-content">Generic Software Pack (GSP) Content</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#hints-for-pack-creation">Hints for Pack Creation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pack-creation-tools">Pack Creation Tools</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pack-generation">Pack Generation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#project-examples">Project Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#support-multiple-compilers">Support Multiple Compilers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#related-examples">Related Examples</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#template-projects">Template Projects</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#reference-applications">Reference Applications</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#layers">Layers</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#code-templates">Code Templates</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pack-examples">Pack Examples</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Experimental-Features/">Experimental Features</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CMSIS-Toolbox</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Pack Creation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Open-CMSIS-Pack/cmsis-toolbox/edit/main/docs/pack-tools.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pack-creation">Pack Creation</h1>
<p>This chapter describes how to create software packs and explains the tools <code>packchk</code> (software pack verification) and <code>svdconv</code> (SVD file converter).  A pack provides a <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/packFormat.html">Pack Description file in XML format (*.pdsc)</a> and collects information that is required by software developers and tools to work effectively with devices, boards, and middleware.</p>
<h2 id="introduction">Introduction</h2>
<p>The picture below shows the structure of the different packs and how boards, devices, and examples are exposed to an user in the <a href="https://marketplace.visualstudio.com/items?itemName=Arm.cmsis-csolution">Arm CMSIS Solution</a> extension for VS Code. Packs are stacked:</p>
<ul>
<li>The Device Family Pack (DFP) is the foundation.</li>
<li>The Board Support Pack (BSP) is based on DFP and are an extension.</li>
<li>The Generic Software Packs (GSP) should use boards defined in a BSP to publish examples or <a href="../ReferenceApplications/">Reference Applications</a> that run on several boards.</li>
</ul>
<p><img alt="Project Examples in Packs" src="../images/ExamplesInPacks.png" title="Project Examples in Packs" /></p>
<h2 id="device-family-pack-dfp-content">Device Family Pack (DFP) Content</h2>
<p>The DFP provides foundation support for a device or device family and is used by:</p>
<ul>
<li>Compiler (Arm Compiler, GCC, IAR, and LLVM): startup code, project templates for bare-metal development, and memory information for linker scripts.</li>
<li>Debuggers: SVD description files for peripheral awareness and debug description for configuration options.</li>
<li>Programmers: download algorithms and debug description for download options.</li>
<li>IDE and web portals: parameter information and links to documentation, repository, and support.</li>
<li>Other technologies such as RUST or Zephyr as the DFP content can be exported.</li>
<li>HAL drivers and CMSIS-Drivers that offer interfaces to device peripherals.</li>
</ul>
<p>Therefore, a DFP collects the following information:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Must have</th>
<th style="text-align: left;">Strongly recommended</th>
<th style="text-align: left;">Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_devices_pg.html">Device description</a></td>
<td style="text-align: left;"><a href="https://github.com/Open-CMSIS-Pack/DFP-Pack-HandsOn/blob/main/Docs/Overview.md"><code>Overview.md</code> file</a></td>
<td style="text-align: left;">Project templates</td>
</tr>
<tr>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/svd-spec/main/index.html">SVD description files</a></td>
<td style="text-align: left;">Links to documentation</td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/debug_description.html">Debug description</a></td>
</tr>
<tr>
<td style="text-align: left;"><a href="https://arm-software.github.io/CMSIS_6/latest/Core/device_h_pg.html">Device Header file</a></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_family_pg.html#element_feature">Device features</a></td>
<td style="text-align: left;">HAL drivers</td>
</tr>
<tr>
<td style="text-align: left;"><a href="https://arm-software.github.io/CMSIS_6/latest/Core/startup_c_pg.html">Startup files (see note)</a></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/element_requirements_pg.html">Pack Requirements</a></td>
<td style="text-align: left;"><a href="https://arm-software.github.io/CMSIS_6/latest/Driver/index.html">CMSIS-Drivers</a></td>
</tr>
<tr>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/flashAlgorithm.html">Download algorithms</a></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Startup files are not required if templates for a configuration generator (such as CubeMX) exports the startup code.</p>
</div>
<p><strong>Hands-on Tutorial:</strong></p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/DFP-Pack-HandsOn">DFP-Pack-HandsOn</a> explains the structure and creation of a Device Family Pack (DFP).</li>
</ul>
<p><strong>Pack Example:</strong></p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/STM32L4xx_DFP">STM32L4xx_DFP</a> available on <a href="https://www.keil.arm.com/packs/stm32l4xx_dfp-keil">keil.arm.com/packs/stm32l4xx_dfp-keil</a>.</li>
</ul>
<h2 id="board-support-pack-bsp-content">Board Support Pack (BSP) Content</h2>
<p>A BSP extends the DFP with information that relates to boards:</p>
<ul>
<li>The Blinky example verifies hardware and tool setup and provides the bootstrap for IDE workflows.</li>
<li>With CMSIS-Driver VIO, simple I/Os such as LEDs and push buttons are controlled, and test automation is supported.</li>
<li>Project templates configured for board peripherals.</li>
<li>A layer can provide a pre-configured driver set for reference applications that interface to middleware.</li>
<li>Board memory with download algorithms extend the information for programmers and linker scripts.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Blinky example of the <a href="https://github.com/Open-CMSIS-Pack/BSP-Pack-HandsOn">BSP-Pack-HandsOn</a> is generic. All it requires to adapt the <code>./Driver/vio*.c</code> to the actual hardware of the board.</p>
</div>
<table>
<thead>
<tr>
<th style="text-align: left;">Must have</th>
<th style="text-align: left;">Strongly recommended</th>
<th style="text-align: left;">Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_boards_pg.html">Board description</a></td>
<td style="text-align: left;"><a href="https://github.com/Open-CMSIS-Pack/BSP-Pack-HandsOn/blob/main/Docs/Overview.md"><code>Overview.md</code> file</a></td>
<td style="text-align: left;">Additional examples</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://github.com/Open-CMSIS-Pack/BSP-Pack-HandsOn/tree/main/Examples/Blinky">Blinky example</a></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/cmsis-toolbox/build-overview/#software-layers">Layers</a> for Reference Applications</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://arm-software.github.io/CMSIS_6/latest/Driver/group__vio__interface__gr.html">CMSIS-Driver VIO</a> for LED and button</td>
<td style="text-align: left;">HAL drivers for board peripherals</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_boards_pg.html#element_board_feature">Board features</a></td>
<td style="text-align: left;">Project templates (board specific)</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_boards_pg.html#element_board_algorithm">Download algorithms for on-board memory</a></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/element_requirements_pg.html">Pack Requirements</a></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The content of a DFP and BSP may be provided in a single pack.</p>
</div>
<p><strong>Hands-on Tutorial:</strong></p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/BSP-Pack-HandsOn">BSP-Pack-HandsOn</a> explains the structure and creation of a Board Support Pack (BSP).</li>
</ul>
<p><strong>Pack Example:</strong></p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/ST_NUCLEO-F746ZG_BSP">NUCLEO-F746ZG_BSP</a> available on <a href="https://www.keil.arm.com/packs/nucleo-f746zg_bsp-keil/overview">keil.arm.com/packs/nucleo-f746zg_bsp-keil</a>.</li>
</ul>
<h2 id="generic-software-pack-gsp-content">Generic Software Pack (GSP) Content</h2>
<p>A GSP may provide additional middleware software such as RTOS, communication stacks, or crypto libraries.</p>
<p><strong>Hands-on Tutorial:</strong></p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/GSP-Pack-HandsOn">GSP-Pack-HandsOn</a> explains the steps to create a software pack.</li>
</ul>
<p><strong>Pack Example:</strong></p>
<ul>
<li><a href="https://github.com/ARM-software/MDK-Middleware">MDK-Middleware</a> available on <a href="https://www.keil.arm.com/packs/mdk-middleware-keil/overview/">www.keil.arm.com/packs/mdk-middleware-keil</a>.</li>
</ul>
<h3 id="hints-for-pack-creation">Hints for Pack Creation</h3>
<p>Several <a href="https://github.com/Open-CMSIS-Pack#ready-to-use-tools">tools and scripts</a> help to automate the pack creation and are used in these hands-on tutorials.</p>
<ul>
<li>Use <a href="https://arm-software.github.io/CMSIS_6/latest/Core/cmsis_core_files.html">C startup files</a> that allows the use of a DFP with any toolchain.</li>
<li>For elements, use a brief description text of less than 128 characters to explain the purpose. When possible, link to documentation with detailed information.<ul>
<li>Example: A component <code>Device:HAL:ENET</code> should not have description <code>ENET HAL Driver</code>, use <code>Ethernet HAL driver</code> instead.</li>
</ul>
</li>
<li>Consider adding <a href="https://github.com/Open-CMSIS-Pack/STM32U5xx_DFP/tree/main/Templates">project templates</a> to help get started with more complex projects.
    This is useful when devices are configured using generators or provide multiple linker scripts (e.g., RAM/ROM execution).</li>
<li>To distribute <a href="../build-overview/#toolchain-agnostic-project">toolchain agnostic examples</a> as part of packs:<ul>
<li>Consider to use <a href="../YML-Input-Format/#select-compiler"><code>select-compiler</code></a> to make projects toolchain independent.</li>
<li>To avoid that examples need updates with every pack release, specify the <a href="https://github.com/Open-CMSIS-Pack/csolution-examples/blob/main/DualCore/HelloWorld.csolution.yml#L9">minimum pack version required</a>.</li>
<li>Use <a href="https://github.com/Open-CMSIS-Pack/STM32H743I-EVAL_BSP/tree/main/.github/workflows">CI workflows</a> to validate that projects compile correctly.</li>
</ul>
</li>
<li>Add an <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/element_package_description.html">overview.md file</a> that describes the software pack's overall usage. These files are displayed on <a href="https://www.keil.arm.com/packs">www.keil.arm.com/packs</a> and indexed by Web search engines.</li>
</ul>
<h2 id="pack-creation-tools">Pack Creation Tools</h2>
<p>The following tools are part of the CMSIS-Toolbox. These tools can be used to develop packs on a local computer and to automate the creation of packs.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Tool</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>packchk</strong></td>
<td style="text-align: left;"><strong>Pack Validation:</strong> installs and manages software packs in the local development environment.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>svdconv</strong></td>
<td style="text-align: left;"><strong>SVD Check / Convert:</strong> validate and/or convert System View Description (SVD) files.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>vidx2pidx</strong></td>
<td style="text-align: left;"><strong>SVD Check / Convert:</strong> check Package index file (PIDX) for indexing in public pack services.</td>
</tr>
</tbody>
</table>
<h3 id="usage">Usage</h3>
<p>The following section is based on the repositories <a href="https://github.com/Open-CMSIS-Pack/DFP-Pack-HandsOn">DFP-Pack-HandsOn</a> and <a href="https://github.com/Open-CMSIS-Pack/BSP-Pack-HandsOn">BSP-Pack-HandsOn</a>.  Checkout these packs for local development of pack content.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Install the VS Code extension <a href="https://marketplace.visualstudio.com/items?itemName=Arm.cmsis-csolution">CMSIS Solution</a> and related tools. The <a href="https://marketplace.visualstudio.com/items?itemName=Arm.keil-studio-pack">Keil Studio Pack</a> is a collection of such related extensions.</p>
</div>
<p><strong>Step 1:</strong> Create an empty workspace and ensure that development tools are available. When using the <a href="https://marketplace.visualstudio.com/items?itemName=Arm.environment-manager">Arm Tools Environment Manager</a> this can be configured using the following vand related tools are installed.</p>
<pre><code class="language-json">{
    &quot;registries&quot;: [
        {
            &quot;name&quot;: &quot;arm&quot;,
            &quot;kind&quot;: &quot;artifact&quot;,
            &quot;location&quot;: &quot;https://artifacts.tools.arm.com/vcpkg-registry&quot;
        }
    ],
    &quot;requires&quot;: {
        &quot;arm:compilers/arm/armclang&quot;: &quot;6.23.0&quot;,
        &quot;arm:compilers/arm/arm-none-eabi-gcc&quot;: &quot;14.2.1&quot;,
        &quot;arm:compilers/arm/llvm-embedded&quot;: &quot;19.1.5&quot;,
        &quot;arm:tools/kitware/cmake&quot;: &quot;3.31.5&quot;,
        &quot;arm:tools/ninja-build/ninja&quot;: &quot;1.12.0&quot;,
        &quot;arm:tools/open-cmsis-pack/cmsis-toolbox&quot;: &quot;2.7.0&quot;
    }
}
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Verify the setup with the commands <code>cbuild list environment</code> and <code>cbuild list toolchains</code>.</p>
</div>
<p><strong>Step 2:</strong> Register packs for development using these commands:</p>
<pre><code class="language-txt">cpackget add &lt;workdir&gt;/DFP-Pack-Handson/ACME.ACMECM4_DFP.pdsc
cpackget add &lt;workdir&gt;/BSP-Pack-Handson/ACME.ACME_BSP.pdsc
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The CMSIS-Toolbox now uses this local repositories. Verify the installation with with the commands <code>cpackget list</code>, <code>csolution list devices</code>, and <code>csolution list boards</code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CMSIS-Toolbox 2.7.0 adds an empty <code>&lt;timestamp&gt;&lt;/timestamp&gt;</code> line to the file <code>$CMSIS_PACK_ROOT/local/local_repository.pidx</code> which prevents the VS Code extension from using the local pack content. As workaround remove this line.</p>
</div>
<p>Content of <code>$CMSIS_PACK_ROOT/local/local_repository.pidx</code>:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;index schemaVersion=&quot;1.1.0&quot;&gt;
 &lt;vendor&gt;local repository&lt;/vendor&gt;
 &lt;url&gt;file://localhost/C:/Users/reikei01/AppData/Local/Arm/Packs&lt;/url&gt;
 &lt;pindex&gt;
  &lt;pdsc vendor=&quot;ACME&quot; url=&quot;file://localhost/c:/w/DFP-Pack-Handson/&quot; name=&quot;ACMECM4_DFP&quot; version=&quot;1.1.1&quot;&gt;&lt;/pdsc&gt;
  &lt;pdsc vendor=&quot;ACME&quot; url=&quot;file://localhost/C:/w/BSP-Pack-HandsOn/&quot; name=&quot;ACME_BSP&quot; version=&quot;1.0.0&quot;&gt;&lt;/pdsc&gt;
 &lt;/pindex&gt;
&lt;/index&gt;
</code></pre>
<p><strong>Step 3:</strong> The various tools have now access to the local packs and you may change the PDSC files. Rename the packs to reflect your products and develop the content starting with the MUST HAVE items listed above.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use the VS Code extension <a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml">Red Hat XML</a> for syntax help on the XML format.</p>
</div>
<p><strong>Step 4:</strong> Verify the packs using the following commands:</p>
<pre><code class="language-txt">packchk &lt;workdir&gt;/DFP-Pack-Handson/ACME.ACMECM4_DFP.pdsc -i $CMSIS_PACK_ROOT/ARM/CMSIS/6.1.0/ARM.CMSIS.pdsc
packchk &lt;workdir&gt;/BSP-Pack-Handson/ACME.ACME_BSP.pdsc -i &lt;workdir&gt;/DFP-Pack-Handson/ACME.ACMECM4_DFP -i $CMSIS_PACK_ROOT/ARM/CMSIS/6.1.0/ARM.CMSIS.pdsc
</code></pre>
<p><strong>Step 5:</strong> Verify the Blinky example with a build test in an IDE and execution test on the board.</p>
<p><strong>Step 6:</strong> Commit the packs to the repository, verify the GitHub action workflows, download the artifacts. Make an end-to-end test of the packs on a different computer.</p>
<p><strong>Step 7:</strong> <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/createPackPublish.html">Publish the packs</a>.</p>
<h2 id="pack-generation">Pack Generation</h2>
<p>Packs may be generated using scripts. Several scripts are available on <a href="https://github.com/open-cmsis-pack">github.com/open-cmsis-pack</a>:</p>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/gen-pack">gen-pack</a> is a library for scripts creating software packs.</li>
<li><a href="https://github.com/Open-CMSIS-Pack/gen-pack-action">gen-pack-action</a> is a GitHub workflow action generating documentation and software packs.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li>Arm uses GitHub actions to create packs. Review this process under the <code>workflow</code> directory on the projects available on <a href="https://github.com/arm-software">github.com/arm-software</a> or <a href="https://github.com/open-cmsis-pack">github.com/open-cmsis-pack</a>.</li>
<li>A good simple pack project is the <a href="https://github.com/arm-software/cmsis-driver">CMSIS-Driver pack</a>. Once this pack is published it is available for software developers using pack managers or <a href="https://www.keil.arm.com/packs/cmsis-driver-arm/overview/">web portals</a>.</li>
</ul>
</div>
<h2 id="versioning">Versioning</h2>
<p>The CMSIS-Pack system uses version numbers to track and differentiate various releases of packs, components, and configuration files. It supports these versioning schemas:</p>
<ol>
<li>
<p><strong>Semantic Versioning</strong> (<a href="https://semver.org/">SemVer</a>) is the recommended format with  <code>MAJOR.MINOR.PATCH</code>. for example: <code>1.4.2</code>. <a href="https://semver.org/">SemVer</a></p>
<ul>
<li><code>MAJOR</code> indicates big updates that break backward compatibility.</li>
<li><code>MINOR</code> indicates new features, but still backward-compatible.</li>
<li><code>PATCH</code> indicates bug fixes or minor tweaks. <code>PATCH</code> can be omitted and defaults to <code>0</code> in this case.</li>
</ul>
</li>
<li>
<p><strong>Calendar Versioning</strong> (<a href="https://calver.org/">CalVer</a>) is accepted when higher values indicated newer releases. The format should be therefore <code>YY.MM.DD</code>, <code>YY.MM</code>, or <code>YY.MM.PATCH</code>. For example:</p>
<ul>
<li><code>22.04</code> indicates April 2022 release.</li>
<li><code>22.04.1</code> indicates April 2022 release, patch version 1.</li>
<li><code>25.02.07</code> indicates release date 7. Feb. 2025.</li>
</ul>
</li>
</ol>
<p>Both versioning schemas support <code>-pre-release</code> labels that may be used during development and testing. For example:</p>
<ul>
<li><code>1.0.0-alpha</code> for early testing.</li>
<li><code>22.04-rc.1</code> for a release candidate that is close to final.</li>
</ul>
<p>Product Lifecycle Management (PLM) and versioning are closely connected. Versioning ensures that each stage of PLM is properly controlled and documented. The CMSIS-Toolbox accepts therefore version numbers and ranges for <code>packs</code> and <code>components</code> and outputs version details in <a href="../YML-CBuild-Format/">build information files</a>.</p>
<p><strong>Semantic Versioning</strong> (<a href="https://semver.org/">SemVer</a>) is recommended as it supports the PLM features of the CMSIS-Toolbox. It enables <a href="../build-overview/#plm-of-configuration-files">PLM of configuration files</a> and simplifies the software pack updates. For example: <code>- pack: ARM::CMSIS@^6.1.0</code> accepts any pack version equal or higher but with the same <code>MAJOR</code> version. </p>
<h2 id="project-examples">Project Examples</h2>
<p>Project examples help to get started with new devices, boards, and middleware software components. The CMSIS-Pack format supports, therefore, different types of project examples:</p>
<ul>
<li><a href="#template-projects"><em>Template Projects</em></a> are <a href="https://github.com/Open-CMSIS-Pack/csolution-examples/tree/main/Templates">stub projects</a> that help to get started. Some software packs may contain device-specific templates.</li>
<li><a href="#examples"><em>Examples</em></a> are created for a specific hardware or evaluation board. These are typically complete projects that directly interface with board and device peripherals.</li>
<li><a href="#reference-applications"><em>Reference Applications</em></a> are hardware-agnostic project examples that required <a href="#layers">layers</a> to add the hardware abstraction of a target (typically a board).</li>
</ul>
<p>In addition, packs may contain:</p>
<ul>
<li><a href="#layers"><em>Layers</em></a> are  pre-configured software components or source code that can be shared across multiple projects.</li>
<li><a href="#code-templates"><em>Code Templates</em></a> are stub source files for middleware components that can be incorporated into user code.</li>
</ul>
<p>The following section explains how the different types of project examples are structured and registered within a CMSIS-Pack.</p>
<h3 id="support-multiple-compilers">Support Multiple Compilers</h3>
<p>To make project examples independent of a specific compiler toolchain, the <code>*.csolution.yml</code> file should include the <code>select-compiler:</code> node with a list of tested compilers. When a user or IDE starts such an example, the <code>compiler:</code> node that selects the compiler gets added.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-yml">solution:
  description: &lt;brief description of the project example&gt;
  created-for: CMSIS-Toolbox@2.6.0
  cdefault:

  select-compiler:  # list of tested compilers that can be selected
    - compiler: AC6
    - compiler: GCC
    - compiler: IAR
    - compiler: CLANG
      :
</code></pre>
<h3 id="related-examples">Related Examples</h3>
<p>The <code>*.csolution.yml</code> file may contain several related projects that share the same <a href="../YML-Input-Format/#target-types"><code>target-types:</code></a> and <a href="../YML-Input-Format/#build-types"><code>build-types:</code></a>.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-yml">solution:
      :
  projects:
    - project: BSD_Server/BSD_Server.cproject.yml
    - project: FTP_Server/FTP_Server.cproject.yml
    - project: HTTP_Server/HTTP_Server.cproject.yml
</code></pre>
<h3 id="template-projects">Template Projects</h3>
<p>A <em>template project</em> does not define a <a href="../YML-Input-Format/#device"><code>device:</code></a> or <a href="../YML-Input-Format/#board"><code>board:</code></a> in the <code>*.csolution.yml</code> file. When a IDE starts such an <em>template</em> the <code>device:</code> and/or <code>board:</code> information along with <code>pack:</code> information is added depending on user selection. The <a href="../YML-Input-Format/#target-types"><code>target-types:</code></a> contains a  <code>Name</code> that may be replaced by a descriptive target name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A <em>template project</em> should not specify the DFP or BSP with a <code>pack:</code> node, as the IDE adds this node during the project start.</p>
</div>
<p><strong>Simple Template:</strong></p>
<p>A simple <em>template</em> only defines one target.</p>
<pre><code class="language-yml">solution:
      :
  target-types:
    - type: Name
#     board:            # added during creation of solution
#     device:           # added during creation of solution
      :
</code></pre>
<p><strong>Multi-Target Template:</strong></p>
<p>A multi-target <em>template</em> may contain different configurations for the same target, such as one that executes from ROM and another that executes from RAM. The example below shows how this could be achieved using <a href="../YML-Input-Format/#variables"><code>variables:</code></a>.</p>
<pre><code class="language-yml">solution:
      :
  target-types:
    - type: Name-ROM
#     board:           # added during creation of solution
#     device:          # added during creation of solution
      variables:
        - regions_header: path/region_ROM.h 

    - type: Name-RAM
#     board:           # added during creation of solution
#     device:          # added during creation of solution
      variables:
        - regions_header: path/region_RAM.h 
      :
</code></pre>
<p>In the example above, projects can use the <a href="../YML-Input-Format/#linker"><code>linker:</code></a> node in the <code>*.cproject.yml</code> file to reference the regions header file of the selected target.</p>
<pre><code class="language-yml">project:

  linker:
    - regions:  $regions_header$
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Templates</em> should compile when the above information is added to the <code>*.csolution.yml</code> file. The exception is when <em>templates</em> require parts of the code provided by a generator.</p>
</div>
<p><strong>Register Template in PDSC File:</strong></p>
<p><em>Templates</em> are published using the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_csolution_pg.html"><code>&lt;csolution&gt;</code> element</a> in the PDSC file. Device-specific <em>Templates</em> should be part of the DFP. Board-specific <em>templates</em> should be part of the BSP.</p>
<pre><code class="language-xml">  &lt;csolution&gt; 
    &lt;template name=&quot;Simple Device project&quot; path=&quot;/device/Simple&quot; file=&quot;Simple.csolution.yml&quot; condition=&quot;Device_Spec&quot;&gt;
      &lt;description&gt;Single-core project with empty main function configured for device&lt;/description&gt;
    &lt;/template&gt;
    &lt;template name=&quot;Simple Board project&quot; path=&quot;/board/Simple&quot; file=&quot;Simple.csolution.yml&quot; condition=&quot;Board_Spec&quot;&gt;
      &lt;description&gt;Single-core project with empty main function configured for board&lt;/description&gt;
    &lt;/template&gt;
  &lt;/csolution&gt;
</code></pre>
<h3 id="examples">Examples</h3>
<p><em>Examples</em> are complete projects that typically run on a board. They should, therefore, specify a <code>target-type</code> with <a href="../YML-Input-Format/#board"><code>board:</code></a> and list the <a href="../YML-Input-Format/#packs"><code>packs:</code></a> that are used, specifically the DFP and BSP.</p>
<p>To minimize maintenance of <em>Examples</em> that are part of a pack, consider these rules:</p>
<ul>
<li><strong>IMPORTANT:</strong> Store all files that are part of the <a href="../build-overview/#rte-directory-structure"><code>./RTE</code> directory</a>. These files store configuration and are important for <a href="../build-overview/#plm-of-configuration-files">PLM</a>.</li>
<li>Use <a href="../YML-Input-Format/#select-compiler"><code>select-compiler:</code></a> when the <em>Example</em> works with several toolchains.  Do not specify <code>compiler:</code>.</li>
<li>Specify <a href="../YML-Input-Format/#pack-name-conventions">minimum pack version</a>. Do not store <code>*.cbuild-pack.yml</code>.</li>
<li>The tool selects first <code>target-type</code> and first <code>build-type</code> when <code>cbuild-set.yml</code> is missing. For simple projects, do not store <code>*.cbuild-set.yml</code>.</li>
<li>For simple projects, rely on the <code>cdefault.yml</code> file that is provided with CMSIS-Toolbox.</li>
</ul>
<p><em>Examples</em> that work with several compiler toolchains should use <a href="../YML-Input-Format/#select-compiler"><code>select-compiler:</code></a> and not define <code>compiler:</code> explicitly. The available toolchain's <code>compiler:</code> node is added when the <em>Example</em> is loaded into the IDE.</p>
<p>When <a href="../YML-Input-Format/#pack-name-conventions">minimum pack versions</a> are specified, the semantic versioning of packs should ensure that newer pack versions work also. As the <code>*.cbuild-pack.yml</code> file fixes pack versions, this file should not be stored in the pack.</p>
<p><em>Examples</em> may contain multiple related projects in the <code>*.csolution.yml</code> file that, for example, cover different aspects of peripheral or middleware. For such <em>Examples</em>, it is not required to store the <code>*.cbuild-set.yml</code> file as the tools select the first <code>target-type</code> and <code>build-type</code> of the <code>*.csolution.yml</code> file.</p>
<p><em>Examples</em> that do not require special compiler controls may rely on the <a href="../build-overview/#cdefaultyml"><code>cdefault.yml</code> file</a> that is provided with CMSIS-Toolbox as this file contains reasonable default settings. For more complex <em>Examples</em>, provide a local copy of the <code>cdefault.yml</code> file in the same directory as the <code>*.csolution.yml</code> file.</p>
<p>Refer to <a href="../build-overview/#toolchain-agnostic-project">Toolchain Agnostic Project</a> for further information.</p>
<p><strong><code>csolution.yml</code> file of an <em>Example</em>:</strong></p>
<pre><code class="language-yml">solution:
# Optional: Add a brief description line (recommendation less than 128 characters)
  description: Example that shows the usage of Fault component on a Cortex-M33 with TrustZone

  created-for: CMSIS-Toolbox@2.6.0          # minimum CMSIS-Toolbox version, newer versions will work also
  cdefault:

  select-compiler:
    - compiler: GCC               # GCC is supported
    - compiler: AC6               # AC6 is supported
    - compiler: IAR               # IAR is supported

  packs:
    - pack: Keil::STM32U5xx_DFP@^2.1.0      # minimum compatible pack version
    - pack: Keil::B-U585I-IOT02A_BSP@^1.0.0

  target-types:
    - type: B-U585I-IOT02A
      board: STMicroelectronics::B-U585I-IOT02A
      device: STMicroelectronics::STM32U585AIIx

  build-types:
    - type: Debug
      debug: on
      optimize: debug

    - type: Release
      debug: off
      optimize: balanced

  projects:
    - project: ./Secure/Fault_S.cproject.yml
    - project: ./NonSecure/Fault_NS.cproject.yml
</code></pre>
<p><strong>Register <em>Examples</em> in PDSC File:</strong></p>
<p><em>Examples</em> can be part of any pack and are published using the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_examples_pg.html"><code>&lt;examples&gt;</code> element</a> in the PDSC file. Note that it is possible to register multiple project formats to support different tool environments.</p>
<pre><code class="language-xml">  &lt;examples&gt;
    &lt;example name=&quot;Fault example&quot; folder=&quot;Examples/Fault/B-U585I-IOT02A&quot; doc=&quot;README.md&quot;&gt;
      &lt;description&gt;Example that shows the usage of Fault component on a Cortex-M33 with TrustZone&lt;/description&gt;
      &lt;board name=&quot;B-U585I-IOT02A&quot; vendor=&quot;STMicroelectronics&quot;/&gt;
      &lt;project&gt;
        &lt;environment name=&quot;csolution&quot; load=&quot;Fault.csolution.yml&quot;/&gt;
        &lt;environment name=&quot;uv&quot; load=&quot;Fault.uvmpw&quot;/&gt;
      &lt;/project&gt;
    &lt;/example&gt;
  &lt;/examples&gt;
</code></pre>
<h3 id="reference-applications">Reference Applications</h3>
<p><a href="../ReferenceApplications/"><em>Reference applications</em></a> can run on many different target hardware boards. Similar to <a href="#template-projects"><em>template projects</em></a>, the <code>device:</code> and <code>board:</code> along with the required DFP and BSP <code>pack:</code> is not specified in the <code>*.csolution.yml</code> file.</p>
<pre><code class="language-yml">solution:
  description: IPv4/IPv6 Network examples
  created-for: CMSIS-Toolbox@2.6.0
  cdefault:

  select-compiler:  # list of tested compilers that can be selected
    - compiler: AC6
    - compiler: GCC
    - compiler: IAR
    - compiler: CLANG

  target-types:
    - type: Name
#     board:           # added during creation of solution
#     variables:
#       - Board-Layer: &lt;board_layer&gt;.clayer.yml
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a href="https://github.com/ARM-software/MDK-Middleware/tree/main/Examples">MDK-Middleware</a> contains several <em>reference applications</em> that exemplify the overall structure.</p>
</div>
<p><strong>Register <em>Reference Applications</em> in PDSC File:</strong></p>
<p><em>Reference Applications</em> are typically part of a middleware software pack and publish using the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_examples_pg.html"><code>&lt;examples&gt;</code> element</a> in the PDSC file. The difference to <a href="#examples"><em>examples</em></a> is that no <code>&lt;board&gt; element</code> is used as the <em>reference application</em> is hardware agnostic.</p>
<pre><code class="language-xml">  &lt;examples&gt;
    &lt;/example&gt;
    &lt;example name=&quot;Network&quot; doc=&quot;README.md&quot; folder=&quot;Examples/Network&quot;&gt;
      &lt;description&gt;MDK-Middleware: IPv4/IPv6 Client and Server applications via Ethernet&lt;/description&gt;
      &lt;project&gt;
        &lt;environment name=&quot;csolution&quot; load=&quot;Network.csolution.yml&quot;/&gt;
      &lt;/project&gt;
    &lt;/example&gt;
</code></pre>
<h2 id="layers">Layers</h2>
<p><a href="../build-overview/#software-layers"><em>Layers</em></a> with <a href="../ReferenceApplications/#connections"><em>connections</em></a> are used to by <a href="#reference-applications"><em>Reference Applications</em></a> to target hardware. These layers are added when a <em>reference application</em> is configured for a <code>board:</code>, typically in the IDE.</p>
<p><strong>Register <em>Layers</em> in PDSC File:</strong></p>
<p><a href="../build-overview/#software-layers"><em>Layers</em></a> are part of a BSP and published using the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_csolution_pg.html"><code>&lt;csolution&gt;</code> element</a> in the PDSC file.</p>
<pre><code class="language-xml">  &lt;csolution&gt;
    &lt;clayer type=&quot;Board&quot; path=&quot;Layers/Default&quot; file=&quot;Board.clayer.yml&quot; copy-to=&quot;Board/MyBoard&quot; condition=&quot;Board-Spec&quot;/&gt;
  &lt;/csolution&gt;
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Several <a href="https://github.com/Open-CMSIS-Pack#stm32-packs-with-generator-support">STM32 Board Support Packs (BSP)</a>  contain <em>layers</em> that are pre-configured for certain applications. For example, the <em>layer</em> in the <a href="https://github.com/Open-CMSIS-Pack/ST_NUCLEO-F756ZG_BSP/tree/main/Layers/Default">ST_NUCLEO-F756ZG_BSP</a> supports applications that require Ethernet, USB Device, UART, or I2C interfaces.</p>
</div>
<h2 id="code-templates">Code Templates</h2>
<p><em>Code templates</em> are part of the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_components_pg.html#Component_Files">components files</a> in the PDSC file and can be manually added by the user to a software project. <em>Code templates</em> show how a software component is used, and the source code can be directly adapted to the requirements of the application program.</p>
<p><strong>Register <em>Code Templates</em> in PDSC File:</strong></p>
<p><a href="../build-overview/#software-layers"><em>Code Templates</em></a> are part of a software component and published using the <a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/pdsc_components_pg.html"><code>&lt;components&gt;</code> element</a> using <code>attr="template"</code> in the PDSC file.</p>
<pre><code class="language-xml">  &lt;component Cgroup=&quot;Socket&quot; Csub=&quot;UDP&quot; condition=&quot;Network Interface&quot;&gt;
    :
    &lt;files&gt;
      &lt;file category=&quot;doc&quot;    name=&quot;Documentation/html/Network/group__netUDP__Func.html&quot;/&gt;
      &lt;file category=&quot;header&quot; name=&quot;Components/Network/Config/Net_Config_UDP.h&quot; attr=&quot;config&quot; version=&quot;5.1.1&quot;/&gt;
      &lt;file category=&quot;source&quot; name=&quot;Components/Network/Template/UDP_Socket.c&quot; attr=&quot;template&quot; select=&quot;UDP Socket&quot;/&gt;
      &lt;!-- Library source files --&gt;
      &lt;file category=&quot;source&quot; name=&quot;Components/Network/Source/net_udp.c&quot;/&gt;
    &lt;/files&gt;
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a href="https://github.com/ARM-software/CMSIS-RTX">CMSIS-RTX</a> and <a href="https://github.com/ARM-software/MDK-Middleware">MDK-Middleware</a> packs contain several <em>code templates</em> that exemplify the overall structure.</p>
</div>
<h2 id="pack-examples">Pack Examples</h2>
<p>Several <a href="https://github.com/Open-CMSIS-Pack#cmsis-software-pack-examples">pack examples</a> available on <a href="https://github.com/Open-CMSIS-Pack">github.com/Open-CMSIS-Pack</a> exemplify how to create software packs. Other packs that are a good reference are the various <a href="https://www.keil.arm.com/packs/cmsis-arm">Arm CMSIS packs</a> or the <a href="https://www.keil.arm.com/packs/mdk-middleware-keil">MDK Middleware pack</a>.  The source of these packs is available on <a href="https://github.com/ARM-software">Github/Arm-software</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../build-operation/" class="btn btn-neutral float-left" title="Build Operation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Troubleshooting/" class="btn btn-neutral float-right" title="Troubleshooting">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Open-CMSIS-Pack/cmsis-toolbox" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../build-operation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Troubleshooting/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
